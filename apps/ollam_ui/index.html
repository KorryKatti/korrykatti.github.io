<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama AI - Gemini Style</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Outfit:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.mjs" type="module"></script>
</head>

<body class="dark-theme">
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">â—‹</span>
                    <span class="logo-text">Ollama</span>
                </div>
                <button id="new-chat-btn" class="icon-btn" title="New Chat">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                </button>
            </div>

            <div class="sidebar-content">
                <div class="section-label">Models</div>
                <select id="model-select" class="model-dropdown">
                    <option value="" disabled selected>Loading models...</option>
                </select>

                <div class="status-indicator" id="status-indicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Checking Ollama...</span>
                </div>

                <div class="history-section">
                    <div class="section-label">Recent</div>
                    <div id="chat-history" class="chat-history">
                        <!-- History items will be injected here -->
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="avatar" id="user-avatar-display">U</div>
                    <span class="username" id="username-display">Local User</span>
                </div>
                <button id="settings-btn" class="icon-btn" title="Settings">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path fill="currentColor"
                            d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.07-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.07.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="current-model-info">
                    <span id="active-model-name">Select a model</span>
                </div>
            </header>

            <div id="chat-container" class="chat-container">
                <div class="welcome-screen" id="welcome-screen">
                    <h1>Hello, how can I help?</h1>
                    <div class="suggestions">
                        <div class="suggestion-card">"Explain quantum computing in simple terms"</div>
                        <div class="suggestion-card">"Write a Python script to scrape a website"</div>
                        <div class="suggestion-card">"Help me write a professional email"</div>
                    </div>
                </div>
                <!-- Messages will be injected here -->
            </div>

            <div class="input-area">
                <div id="context-info" class="context-info">
                    <div class="context-bar-container">
                        <div id="context-bar" class="context-bar"></div>
                    </div>
                    <span id="context-text">Context: 0 / 4096 tokens</span>
                </div>
                <div id="attachments-container" class="attachments-container"></div>
                <div class="input-wrapper">
                    <button id="attach-btn" class="icon-btn" title="Upload File">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                        </svg>
                    </button>
                    <input type="file" id="file-input" hidden multiple accept=".txt,.pdf,.png,.jpg,.jpeg">
                    <textarea id="user-input" placeholder="Enter a prompt here..." rows="1"></textarea>
                    <div class="input-actions">
                        <button id="send-btn" class="send-btn" disabled>
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                            </svg>
                        </button>
                    </div>
                </div>
                <p class="disclaimer">Ollama can make mistakes. Check important info.</p>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button id="close-settings" class="icon-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label>User Name</label>
                    <input type="text" id="setting-username" placeholder="Enter your name">
                </div>
                <div class="setting-item">
                    <label>Profile Picture</label>
                    <input type="file" id="setting-avatar" accept="image/*">
                </div>
                <div class="setting-item">
                    <label>System Prompt (Personality)</label>
                    <textarea id="setting-system-prompt" rows="3"
                        placeholder="e.g. You are a helpful assistant who speaks like a pirate."></textarea>
                </div>
                <div class="setting-item checkbox-setting">
                    <label>
                        <input type="checkbox" id="setting-include-time">
                        Include current time in messages
                    </label>
                </div>
                <div class="setting-item">
                    <label>Default Context Limit (tokens)</label>
                    <div class="input-with-hint">
                        <input type="number" id="setting-context-limit" value="4096" step="512">
                        <small>Auto-updates based on model if available</small>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Ollama Base URL</label>
                    <input type="text" id="setting-ollama-url" value="http://localhost:11434">
                </div>
                <div class="setting-item">
                    <label>Theme</label>
                    <select id="setting-theme">
                        <option value="dark">Dark</option>
                        <option value="light">Light</option>
                    </select>
                </div>
                <hr>
                <div class="setting-item danger-zone">
                    <label>Data Management</label>
                    <button id="clear-history-btn" class="danger-btn">Clear All Chat History</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>